{% extends 'base.html' %}

{% block content %}
<div class="fade-in">
  <h2 style="margin-bottom:10px;">ğŸ“„ Contract Report</h2>
  <p style="color:#7f8c8d;margin-bottom:30px;">Active contracts and license agreements</p>

  <!-- Summary Cards -->
  <div class="dashboard" style="margin-bottom:30px;">
    <div class="metric-card">
      <div>
        <div class="metric-label">Total Contracts</div>
        <div class="metric-value">{{ contract_data|length }}</div>
      </div>
      <div class="icon">ğŸ“„</div>
    </div>
    <div class="metric-card">
      <div>
        <div class="metric-label">Active</div>
        <div class="metric-value" style="color:#27ae60">{{ contract_summary.active }}</div>
      </div>
      <div class="icon">âœ“</div>
    </div>
    <div class="metric-card">
      <div>
        <div class="metric-label">Expired</div>
        <div class="metric-value" style="color:#e74c3c">{{ contract_summary.expired }}</div>
      </div>
      <div class="icon">â°</div>
    </div>
    <div class="metric-card">
      <div>
        <div class="metric-label">Pending</div>
        <div class="metric-value" style="color:#f39c12">{{ contract_summary.pending }}</div>
      </div>
      <div class="icon">â³</div>
    </div>
  </div>

  <!-- Contract Table -->
  <div style="background:white;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.1);padding:30px;">
    <h3 style="color:#3498db;margin-bottom:20px;">ğŸ“‹ Contract Details</h3>
    {% if contract_data %}
    <div class="table-responsive">
      <table>
        <thead>
          <tr>
            <th>Asset</th>
            <th>Vendor</th>
            <th>Contract Type</th>
            <th>Start Date</th>
            <th>Status</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          {% for contract in contract_data %}
          <tr>
            <td><strong>{{ contract.asset_name }}</strong></td>
            <td>{{ contract.vendor or 'N/A' }}</td>
            <td>
              <span style="background:#e3f2fd;color:#1976d2;padding:4px 8px;border-radius:4px;font-size:12px;">
                {{ contract.type }}
              </span>
            </td>
            <td>{{ contract.start_date.strftime('%Y-%m-%d') if contract.start_date else 'N/A' }}</td>
            <td>
              {% if contract.status == 'Active' %}
              <span style="background:#e8f5e9;color:#2e7d32;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;">âœ“ Active</span>
              {% elif contract.status == 'Expired' %}
              <span style="background:#ffebee;color:#c62828;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;">â° Expired</span>
              {% else %}
              <span style="background:#fff3e0;color:#e65100;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;">â³ Pending</span>
              {% endif %}
            </td>
            <td style="max-width:300px;">{{ contract.notes or 'N/A' }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <p style="color:#7f8c8d;text-align:center;padding:40px;">No contract records found</p>
    {% endif %}
  </div>
</div>
{% endblock %}
