{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <h1>üè¢ Company Information</h1>
    <p>Manage your organization's details and settings</p>
</div>

<div class="form-card">
    <form method="POST" action="{{ url_for('company_info') }}" class="form-grid">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
        
        <div class="section-header" style="grid-column: span 2;">
            <h2>üìã Basic Information</h2>
        </div>
        
        <div class="form-group">
            <label for="name">Company Name *</label>
            <input type="text" id="name" name="name" value="{{ company.name if company else '' }}" required>
        </div>
        
        <div class="form-group">
            <label for="legal_name">Legal Name</label>
            <input type="text" id="legal_name" name="legal_name" value="{{ company.legal_name if company else '' }}">
        </div>
        
        <div class="form-group">
            <label for="abbreviation">Abbreviation</label>
            <input type="text" id="abbreviation" name="abbreviation" value="{{ company.abbreviation if company else '' }}" placeholder="e.g., VBOS">
        </div>
        
        <div class="form-group">
            <label for="registration_number">Registration Number</label>
            <input type="text" id="registration_number" name="registration_number" value="{{ company.registration_number if company else '' }}">
        </div>
        
        <div class="form-group" style="grid-column: span 2;">
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="3">{{ company.description if company else '' }}</textarea>
        </div>
        
        <div class="section-header" style="grid-column: span 2; margin-top: 20px;">
            <h2>üìç Address Information</h2>
        </div>
        
        <div class="form-group" style="grid-column: span 2;">
            <label for="address">Street Address</label>
            <input type="text" id="address" name="address" value="{{ company.address if company else '' }}">
        </div>
        
        <div class="form-group">
            <label for="city">City</label>
            <input type="text" id="city" name="city" value="{{ company.city if company else '' }}">
        </div>
        
        <div class="form-group">
            <label for="state">State/Province</label>
            <input type="text" id="state" name="state" value="{{ company.state if company else '' }}">
        </div>
        
        <div class="form-group">
            <label for="postal_code">Postal Code</label>
            <input type="text" id="postal_code" name="postal_code" value="{{ company.postal_code if company else '' }}">
        </div>
        
        <div class="form-group">
            <label for="country">Country</label>
            <input type="text" id="country" name="country" value="{{ company.country if company else 'Vanuatu' }}">
        </div>
        
        <div class="section-header" style="grid-column: span 2; margin-top: 20px;">
            <h2>üìû Contact Information</h2>
        </div>
        
        <div class="form-group">
            <label for="phone">Phone</label>
            <input type="text" id="phone" name="phone" value="{{ company.phone if company else '' }}" placeholder="+678 23450">
        </div>
        
        <div class="form-group">
            <label for="fax">Fax</label>
            <input type="text" id="fax" name="fax" value="{{ company.fax if company else '' }}">
        </div>
        
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" value="{{ company.email if company else '' }}" placeholder="info@company.com">
        </div>
        
        <div class="form-group">
            <label for="website">Website</label>
            <input type="url" id="website" name="website" value="{{ company.website if company else '' }}" placeholder="https://example.com">
        </div>
        
        <div class="section-header" style="grid-column: span 2; margin-top: 20px;">
            <h2>üíº Business Information</h2>
        </div>
        
        <div class="form-group">
            <label for="tax_id">Tax ID</label>
            <input type="text" id="tax_id" name="tax_id" value="{{ company.tax_id if company else '' }}">
        </div>
        
        <div class="form-group">
            <label for="fiscal_year_start">Fiscal Year Start</label>
            <input type="date" id="fiscal_year_start" name="fiscal_year_start" value="{{ company.fiscal_year_start if company else '' }}">
        </div>
        
        <div class="form-group">
            <label for="currency">Currency</label>
            <select id="currency" name="currency">
                <option value="VUV" {% if company and company.currency == 'VUV' %}selected{% endif %}>VUV - Vanuatu Vatu</option>
                <option value="USD" {% if company and company.currency == 'USD' %}selected{% endif %}>USD - US Dollar</option>
                <option value="AUD" {% if company and company.currency == 'AUD' %}selected{% endif %}>AUD - Australian Dollar</option>
                <option value="NZD" {% if company and company.currency == 'NZD' %}selected{% endif %}>NZD - New Zealand Dollar</option>
                <option value="EUR" {% if company and company.currency == 'EUR' %}selected{% endif %}>EUR - Euro</option>
                <option value="GBP" {% if company and company.currency == 'GBP' %}selected{% endif %}>GBP - British Pound</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="timezone">Timezone</label>
            <select id="timezone" name="timezone">
                <option value="Pacific/Efate" {% if company and company.timezone == 'Pacific/Efate' %}selected{% endif %}>Pacific/Efate (Vanuatu)</option>
                <option value="Pacific/Auckland" {% if company and company.timezone == 'Pacific/Auckland' %}selected{% endif %}>Pacific/Auckland</option>
                <option value="Australia/Sydney" {% if company and company.timezone == 'Australia/Sydney' %}selected{% endif %}>Australia/Sydney</option>
                <option value="UTC" {% if company and company.timezone == 'UTC' %}selected{% endif %}>UTC</option>
            </select>
        </div>
        
        <div class="form-group" style="grid-column: span 2; margin-top: 20px;">
            <button type="submit" class="btn btn-primary" style="padding: 12px 30px; font-size: 16px;">
                üíæ Save Company Information
            </button>
        </div>
    </form>
</div>

{% if company and company.updated_at %}
<div class="info-card" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
    <h3 style="margin-bottom: 10px; font-size: 16px;">üìÖ Last Updated</h3>
    <p style="font-size: 14px; color: #666;">
        {{ company.updated_at.strftime('%B %d, %Y at %H:%M') }}
        {% if company.updated_by %} by <strong>{{ company.updated_by }}</strong>{% endif %}
    </p>
</div>
{% endif %}

<style>
.form-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
}

.section-header {
    margin-top: 10px;
    padding-bottom: 10px;
    border-bottom: 2px solid #e0e0e0;
}

.section-header h2 {
    font-size: 18px;
    color: #2c3e50;
    margin: 0;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-group label {
    margin-bottom: 5px;
    font-weight: 500;
    color: #333;
    font-size: 14px;
}

.form-group input,
.form-group textarea,
.form-group select {
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
}

.form-group textarea {
    resize: vertical;
    font-family: inherit;
}

.form-group select {
    cursor: pointer;
}

@media (max-width: 768px) {
    .form-grid {
        grid-template-columns: 1fr;
    }
    
    .form-group[style*="span 2"],
    .section-header {
        grid-column: span 1 !important;
    }
}
</style>

{% endblock %}
