{% extends 'base.html' %}
{% block content %}
<div class="fade-in">
  <div style="max-width:900px;margin:0 auto;">
    <div style="margin-bottom:30px;">
      <h2 style="color:#2c3e50;margin-bottom:10px;">üöö Move Asset</h2>
      <p style="color:#7f8c8d;">Relocate assets between locations or departments with full tracking</p>
    </div>

    <div style="background:white;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.1);padding:30px;">
      <form method="post">
        <!-- Asset Selection -->
        <div style="margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid #9b59b6;">
          <h3 style="color:#9b59b6;margin-bottom:20px;">üì¶ Asset Selection</h3>
          <div style="display:grid;grid-template-columns:2fr 1fr;gap:20px;">
            <div>
              <label style="display:block;font-weight:600;color:#2c3e50;margin-bottom:8px;">
                Select Asset <span style="color:#e74c3c;">*</span>
              </label>
              <select name="asset_name" id="asset_name" required onchange="loadCurrentLocation()" style="width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;background:#fafafa;">
                <option value="">-- Select an asset --</option>
                {% for name, data in assets %}
                <option value="{{ name }}" data-location="{{ data.location or 'Not set' }}" data-department="{{ data.department or 'Not set' }}">
                  {{ name }}
                </option>
                {% endfor %}
              </select>
            </div>
            <div>
              <label style="display:block;font-weight:600;color:#2c3e50;margin-bottom:8px;">
                Quantity
              </label>
              <input type="number" name="quantity" value="1" min="1" style="width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;background:#fafafa;">
            </div>
          </div>
        </div>

        <!-- Current Location Display -->
        <div id="current_location" style="display:none;background:#fff3cd;border-left:4px solid #ffc107;padding:15px;border-radius:6px;margin-bottom:30px;">
          <div style="font-weight:600;color:#856404;margin-bottom:10px;">üìç Current Location</div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;">
            <div>
              <div style="font-size:12px;color:#856404;">LOCATION</div>
              <div id="current_loc" style="color:#2c3e50;font-size:15px;margin-top:3px;font-weight:600;">-</div>
            </div>
            <div>
              <div style="font-size:12px;color:#856404;">DEPARTMENT</div>
              <div id="current_dept" style="color:#2c3e50;font-size:15px;margin-top:3px;font-weight:600;">-</div>
            </div>
          </div>
        </div>

        <!-- From Location -->
        <div style="margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid #e67e22;">
          <h3 style="color:#e67e22;margin-bottom:20px;">üì§ From Location</h3>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
            <div>
              <label style="display:block;font-weight:600;color:#2c3e50;margin-bottom:8px;">
                Current Location
              </label>
              <input type="text" name="from_location" placeholder="Enter current location" style="width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;background:#fafafa;">
            </div>
            <div>
              <label style="display:block;font-weight:600;color:#2c3e50;margin-bottom:8px;">
                Current Department
              </label>
              <input type="text" name="from_department" placeholder="Enter current department" style="width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;background:#fafafa;">
            </div>
          </div>
        </div>

        <!-- To Location -->
        <div style="margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid #27ae60;">
          <h3 style="color:#27ae60;margin-bottom:20px;">üì• To Location</h3>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
            <div>
              <label style="display:block;font-weight:600;color:#2c3e50;margin-bottom:8px;">
                New Location <span style="color:#e74c3c;">*</span>
              </label>
              <input type="text" name="to_location" required placeholder="Enter destination location" style="width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;background:#fafafa;">
            </div>
            <div>
              <label style="display:block;font-weight:600;color:#2c3e50;margin-bottom:8px;">
                New Department <span style="color:#e74c3c;">*</span>
              </label>
              <input type="text" name="to_department" required placeholder="Enter destination department" style="width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;background:#fafafa;">
            </div>
          </div>
          <div style="margin-top:20px;">
            <label style="display:block;font-weight:600;color:#2c3e50;margin-bottom:8px;">
              Move Notes
            </label>
            <textarea name="notes" rows="3" placeholder="Reason for move, moving company, special handling instructions..." style="width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;background:#fafafa;resize:vertical;"></textarea>
          </div>
        </div>

        <!-- Action Buttons -->
        <div style="display:flex;gap:15px;justify-content:flex-end;">
          <a href="{{ url_for('assets') }}" style="background:#95a5a6;color:white;padding:12px 30px;border-radius:8px;text-decoration:none;font-weight:600;">
            Cancel
          </a>
          <button type="submit" style="background:linear-gradient(135deg,#9b59b6 0%,#8e44ad 100%);color:white;padding:12px 30px;border:none;border-radius:8px;font-weight:600;cursor:pointer;box-shadow:0 2px 8px rgba(155,89,182,0.3);">
            üöö Move Asset
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
function loadCurrentLocation() {
  const select = document.getElementById('asset_name');
  const selectedOption = select.options[select.selectedIndex];
  const currentLoc = document.getElementById('current_location');
  
  if (selectedOption.value) {
    const location = selectedOption.getAttribute('data-location');
    const department = selectedOption.getAttribute('data-department');
    
    document.getElementById('current_loc').textContent = location;
    document.getElementById('current_dept').textContent = department;
    currentLoc.style.display = 'block';
  } else {
    currentLoc.style.display = 'none';
  }
}
</script>
{% endblock %}
