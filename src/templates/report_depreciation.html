{% extends 'base.html' %}

{% block content %}
<h2>Depreciation Report</h2>
<p style="color:#7f8c8d;">Asset depreciation and value analysis report</p>

<div style="background:#fff;padding:24px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,.08);margin-top:20px;">
  <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:30px;">
    <div style="background:#ecf0f1;padding:20px;border-radius:8px;text-align:center;">
      <h3 style="margin:0;color:#7f8c8d;font-size:14px;">Total Purchase Value</h3>
      <p style="margin:10px 0 0;font-size:28px;font-weight:bold;color:#3498db;">VT{{ '%.2f'|format(total_purchase_value) }}</p>
    </div>
    <div style="background:#ecf0f1;padding:20px;border-radius:8px;text-align:center;">
      <h3 style="margin:0;color:#7f8c8d;font-size:14px;">Current Value</h3>
      <p style="margin:10px 0 0;font-size:28px;font-weight:bold;color:#27ae60;">VT{{ '%.2f'|format(total_current_value) }}</p>
    </div>
    <div style="background:#ecf0f1;padding:20px;border-radius:8px;text-align:center;">
      <h3 style="margin:0;color:#7f8c8d;font-size:14px;">Total Depreciation</h3>
      <p style="margin:10px 0 0;font-size:28px;font-weight:bold;color:#e74c3c;">VT{{ '%.2f'|format(total_depreciation) }}</p>
    </div>
  </div>

  <h3>Depreciation Analysis</h3>
  {% if assets %}
  <table>
    <thead>
      <tr>
        <th>Asset Name</th>
        <th>Purchase Date</th>
        <th>Quantity</th>
        <th>Purchase Value</th>
        <th>Current Value</th>
        <th>Depreciation</th>
        <th>Method</th>
        <th>Useful Life</th>
      </tr>
    </thead>
    <tbody>
      {% for asset in assets %}
      <tr>
        <td><strong>{{ asset.name }}</strong></td>
        <td>{{ asset.purchase_date }}</td>
        <td>{{ asset.quantity }}</td>
        <td>VT{{ '%.2f'|format(asset.purchase_value) }}</td>
        <td style="color:#27ae60;font-weight:600;">VT{{ '%.2f'|format(asset.current_value) }}</td>
        <td>
          <span style="color:#e74c3c;font-weight:600;">VT{{ '%.2f'|format(asset.depreciation_amount) }}</span>
          <br><small>({{ '%.1f'|format(asset.depreciation_percent) }}%)</small>
        </td>
        <td>
          {% if asset.method == 'straight_line' %}Straight Line
          {% elif asset.method == 'declining_balance' %}Declining Balance
          {% else %}{{ asset.method }}{% endif %}
        </td>
        <td>{{ asset.useful_life }} years</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>No depreciation data available. Assets need purchase dates and depreciation methods configured.</p>
  {% endif %}
</div>
{% endblock %}
